<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xrx.jingbao.dao.LoginDAO">
    <resultMap id="LoginMap" type="User">
        <id column="customer_id" property="customerId"/>
        <result column="password" property="password"/>
        <result column="username" property="username"/>
        <result column="nickname" property="nickname"/>
        <result column="gravatar_img" property="gravatarImg"/>

    </resultMap>
    <select id="validation" resultMap="LoginMap" parameterType="java.lang.String">
        SELECT username, password, customer_id,nickname,gravatar_img
        from t_user
        where username = #{username}
    </select>
    <select id="findUserId" resultMap="LoginMap" parameterType="java.lang.Integer">
        SELECT username, password, customer_id,nickname,gravatar_img
        from t_user
        where customer_id = #{customerId}
    </select>

    <resultMap id="CustomerMap" type="Customer">
        <id column="customer_id" property="customerId"/>
        <result column="customer_name" property="customerName"/>
    </resultMap>
    <insert id="register" parameterType="User">
        insert into t_user(username, password,nickname) value (#{user.username},#{user.password},#{user.nickname} )
    </insert>
    <insert id="saveCustomer" parameterType="Customer">
        insert into t_customer(customer_id,customer_name,sex,phone,email,identity_card,province,city,area,customer_introduction) value (#{customer.customerId},#{customer.customerName},#{customer.sex},#{customer.phone},#{customer.email},#{customer.identityCard},#{customer.province},#{customer.city},#{customer.area},#{customer.customerIntroduction} )
    </insert>
</mapper>
